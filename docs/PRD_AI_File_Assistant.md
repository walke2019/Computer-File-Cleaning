# 🧠 AI 文件清理助手 - 产品需求文档 (PRD)

> **项目代号**: CleanGenius / 智理
> **版本**: v1.0
> **日期**: 2026年1月
> **目标平台**: Windows 10/11, macOS 12+
> **技术栈**: Electron + 本地 LLM (Ollama/LM Studio)

---

## 🎯 一、产品愿景

**"让每一个文件都有归属，让混乱的磁盘变得井井有条"**

打造一款 **隐私优先、全本地运行** 的 AI 文件智能整理工具，利用本地大语言模型（LLM）和多模态能力，实现文件的 **智能分析 → 自动分类 → 智能重命名 → 持续监控**。

---

## 📊 二、市场定位与差异化

### 2.1 目标用户

| 用户群体 | 痛点 | 解决方案 |
|----------|------|----------|
| 普通用户 | 下载文件夹混乱、桌面堆满文件 | 一键智能整理、自动分类 |
| 专业人士 | 项目文件散乱、难以检索 | 智能建立项目结构、语义搜索 |
| 隐私敏感用户 | 不信任云端 AI 服务 | 100% 本地运行、离线可用 |
| 摄影/设计师 | 大量图片无序、命名混乱 | AI 看图分类、智能重命名 |

### 2.2 核心差异化

| 竞品不足 | 我们的方案 |
|----------|------------|
| 依赖云端 API，有隐私风险 | 全本地 LLM，零上传 |
| 仅支持文本文件 | 多模态：文本/图片/PDF/音频 |
| 规则式分类，不智能 | AI 语义理解，自适应学习 |
| 无法撤销，操作危险 | 完整的预览 + 撤销系统 |
| 界面复杂，需要技术背景 | 零配置开箱即用 |

---

## 🔧 三、功能需求清单

### 3.1 核心功能模块

#### 📁 模块 A：智能文件分析

| ID | 功能 | 描述 | 优先级 |
|----|------|------|--------|
| A1 | 文本内容分析 | 读取 TXT/DOC/PDF 内容，提取主题/关键词 | P0 |
| A2 | 图片视觉理解 | 使用 LLaVA/Qwen-VL 识别图片内容 | P0 |
| A3 | PDF 智能解析 | OCR + 语义分析，识别发票/合同/报告等 | P1 |
| A4 | 音频转写分析 | Whisper 本地转写，提取音频内容摘要 | P2 |
| A5 | 代码文件识别 | 分析代码文件，识别项目/语言/用途 | P1 |
| A6 | 压缩包预览 | 无需解压查看内容，分析归类 | P2 |

#### 🗂️ 模块 B：智能分类系统

| ID | 功能 | 描述 | 优先级 |
|----|------|------|--------|
| B1 | 多级文件夹生成 | AI 自动创建合理的目录结构 (如 财务/2025/Q3) | P0 |
| B2 | 自定义分类规则 | 用户可定义分类模板/偏好 | P1 |
| B3 | 项目智能聚合 | 将分散的项目文件自动归集 | P1 |
| B4 | 时间线整理 | 按日期/周/月/年自动归档 | P1 |
| B5 | 标签系统 | 为文件添加 AI 生成的标签 | P2 |

#### ✏️ 模块 C：智能重命名

| ID | 功能 | 描述 | 优先级 |
|----|------|------|--------|
| C1 | 内容驱动命名 | 基于文件内容生成有意义的文件名 | P0 |
| C2 | 批量重命名 | 一键处理大量文件 | P0 |
| C3 | 命名模板 | 支持 {日期}_{主题}_{序号} 等模式 | P1 |
| C4 | 安全预览 | 重命名前预览所有更改 | P0 |
| C5 | 冲突处理 | 智能处理同名文件 | P0 |

#### 🔍 模块 D：智能去重

| ID | 功能 | 描述 | 优先级 |
|----|------|------|--------|
| D1 | 哈希去重 | MD5/SHA256 精确匹配 | P0 |
| D2 | 语义相似度 | Embedding 检测内容相似文件 | P1 |
| D3 | 相似图片检测 | 视觉相似度分析（连拍/缩略图） | P1 |
| D4 | 智能保留建议 | AI 推荐保留最佳版本 | P2 |

#### 💬 模块 E：对话式交互

| ID | 功能 | 描述 | 优先级 |
|----|------|------|--------|
| E1 | 自然语言命令 | "把所有发票移到财务文件夹" | P0 |
| E2 | 语义文件搜索 | "找到上周的项目报告" | P1 |
| E3 | 批量操作确认 | AI 解释即将执行的操作 | P0 |
| E4 | 操作建议 | 基于历史习惯给出建议 | P2 |

#### ⏰ 模块 F：自动化监控

| ID | 功能 | 描述 | 优先级 |
|----|------|------|--------|
| F1 | 文件夹监控 | 实时监控下载/桌面等目录 | P1 |
| F2 | 自动整理规则 | 新文件自动分类 | P1 |
| F3 | 定时扫描 | 每周自动扫描建议整理 | P2 |
| F4 | 智能提醒 | "您的下载文件夹有 50 个新文件待整理" | P2 |

#### 🛡️ 模块 G：安全与隐私

| ID | 功能 | 描述 | 优先级 |
|----|------|------|--------|
| G1 | 100% 本地运行 | 无网络请求，完全离线可用 | P0 |
| G2 | 预览模式 | Dry Run，不实际移动文件 | P0 |
| G3 | 完整撤销 | 任意操作可撤销至原状态 | P0 |
| G4 | 操作日志 | 记录所有文件操作历史 | P0 |
| G5 | 白名单/黑名单 | 保护敏感目录 | P1 |
| G6 | 回收站集成 | 删除文件进回收站而非永久删除 | P0 |

---

### 3.2 技术架构

```
┌─────────────────────────────────────────────────────────────┐
│                    用户界面层 (Electron + React/Vue)         │
├─────────────────────────────────────────────────────────────┤
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────────────┐ │
│  │  文件浏览器   │ │  AI 对话面板  │ │  操作预览/确认面板    │ │
│  └──────────────┘ └──────────────┘ └──────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│                    业务逻辑层 (Node.js)                      │
├─────────────────────────────────────────────────────────────┤
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────────────┐ │
│  │  文件分析器   │ │  分类引擎     │ │  操作执行器           │ │
│  └──────────────┘ └──────────────┘ └──────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│                    AI 引擎层 (本地 LLM)                      │
├─────────────────────────────────────────────────────────────┤
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────────────┐ │
│  │  Ollama API  │ │  LM Studio   │ │  内置轻量模型         │ │
│  │  (推荐)       │ │  (可选)      │ │  (Phi-3 ONNX)       │ │
│  └──────────────┘ └──────────────┘ └──────────────────────┘ │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────────────┐ │
│  │  LLaVA 视觉  │ │  Whisper 音频│ │  BGE Embedding      │ │
│  └──────────────┘ └──────────────┘ └──────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 3.3 推荐模型配置

| 任务 | 推荐模型 | 内存需求 | 说明 |
|------|----------|----------|------|
| 通用对话/分析 | Qwen2.5-7B-Instruct | 8GB+ | 中文理解最佳 |
| 轻量快速 | Llama3.2-3B | 4GB+ | 速度与效果平衡 |
| 图片理解 | LLaVA-v1.6-7B | 12GB+ | 视觉多模态 |
| 音频转写 | Whisper-large-v3 | 8GB+ | 本地语音识别 |
| 文本嵌入 | BGE-m3 / nomic-embed | 4GB+ | 相似度检索 |
| 超轻量内置 | Phi-3-mini-ONNX | 2GB | 无需 Ollama |

---

## 🖥️ 四、用户界面设计

### 4.1 主要页面

| 页面 | 功能 | 交互 |
|------|------|------|
| 🏠 主面板 | 快速扫描入口、统计概览 | 拖放目录、一键扫描 |
| 🔍 扫描结果 | 文件预览、分类建议 | 批量选择、确认/修改 |
| 💬 AI 助手 | 对话式交互 | 自然语言输入 |
| 📁 文件浏览 | 树形结构、智能搜索 | 右键菜单操作 |
| ⚙️ 设置 | 模型配置、分类规则、黑白名单 | 表单配置 |
| 📜 历史记录 | 操作日志、撤销入口 | 时间线视图 |

### 4.2 核心交互流程

```
┌──────────────┐     ┌───────────────┐     ┌───────────────┐
│  选择目录     │ ──▶ │  AI 分析中...  │ ──▶ │  预览结果页    │
│  拖放/点击    │     │  进度条+预览   │     │  分类/重命名   │
└──────────────┘     └───────────────┘     └───────────────┘
                                                   │
                                                   ▼
┌──────────────┐     ┌───────────────┐     ┌───────────────┐
│  操作完成     │ ◀── │  确认执行      │ ◀── │  用户调整      │
│  可撤销       │     │  一键应用      │     │  修改/排除     │
└──────────────┘     └───────────────┘     └───────────────┘
```

---

## 📐 五、技术实现细节

### 5.1 文件内容提取

```javascript
// 支持的文件类型及提取策略
const extractors = {
  '.txt': 'readAsText',
  '.md': 'readAsMarkdown',
  '.pdf': 'pdfParseWithOCR',
  '.docx': 'mammothExtract',
  '.xlsx': 'excelParse',
  '.jpg/.png': 'llavaVisionAnalysis',
  '.mp3/.wav': 'whisperTranscribe',
  '.zip/.rar': 'archivePreview'
};
```

### 5.2 Prompt 设计示例

```
你是一个专业的文件整理助手。请分析以下文件信息，返回 JSON 格式的分类建议：

文件名: {filename}
文件类型: {type}
内容摘要: {content_preview}
创建日期: {date}

请返回:
{
  "suggested_folder": "建议的目录路径，如 财务/2025/发票",
  "suggested_name": "建议的新文件名",
  "tags": ["标签1", "标签2"],
  "confidence": 0.95,
  "reason": "分类理由"
}
```

### 5.3 性能优化策略

| 策略 | 说明 |
|------|------|
| 分批处理 | 每批最多处理 20 个文件 |
| 缓存 Embedding | 避免重复计算向量 |
| 增量扫描 | 只处理新增/修改的文件 |
| 模型热加载 | 首次启动后常驻内存 |
| 并行处理 | 多线程处理独立文件 |

---

## 🚀 六、开发路线图

### Phase 1: MVP (v0.1) - 4 周
- ✅ 基础 UI 框架
- ✅ Ollama 集成
- ✅ 文本文件分析 + 分类
- ✅ 智能重命名
- ✅ 预览 + 撤销

### Phase 2: 多模态 (v0.5) - 4 周
- [ ] LLaVA 图片理解
- [ ] PDF OCR 支持
- [ ] 相似度去重
- [ ] 文件夹监控

### Phase 3: 完善 (v1.0) - 4 周
- [ ] 对话式交互完善
- [ ] 自定义规则引擎
- [ ] 音频转写
- [ ] Mac 适配优化

### Phase 4: 高级功能 (v2.0) - 持续
- [ ] Embedding 语义搜索
- [ ] 自适应学习
- [ ] 插件系统
- [ ] 多语言支持

---

## 📏 七、成功指标

| 指标 | 目标 | 测量方式 |
|------|------|----------|
| 分类准确率 | > 90% | 用户确认/修改率 |
| 单文件处理速度 | < 2s (纯文本) | 性能监控 |
| 撤销成功率 | 100% | 无数据丢失 |
| 用户满意度 | > 4.5/5 | 应用内反馈 |
| 内存占用 | < 2GB (轻量模式) | 系统监控 |

---

## 🔐 八、隐私承诺

1. **零上传**: 所有 AI 处理 100% 本地完成
2. **无遥测**: 不收集任何用户数据
3. **开源透明**: 核心代码开源可审计
4. **离线可用**: 无需网络连接即可工作
5. **数据自主**: 所有配置/日志存储在本地

---

## 📝 九、附录

### A. 竞品分析

| 竞品 | 优点 | 缺点 | 我们的机会 |
|------|------|------|------------|
| AI FileSorter | 成熟稳定 | 界面老旧 | 现代化 UI |
| Local-File-Organizer | 隐私好 | 需要技术背景 | 零配置易用 |
| Sparkle | Mac 体验好 | 仅 Mac | 跨平台 |
| 传统清理工具 | 稳定 | 不智能 | AI 驱动 |

### B. 技术风险

| 风险 | 缓解措施 |
|------|----------|
| 本地模型性能不足 | 提供多档位模型选择 |
| AI 分类错误 | 必须预览确认，可撤销 |
| 跨平台兼容性 | Electron 统一 + 平台适配层 |
| 模型安装复杂 | 内置轻量模型 / 一键安装 Ollama |

---

**文档版本**: v1.0  
**最后更新**: 2026-01-17  
**作者**: AI 产品设计团队
